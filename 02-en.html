<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How the Whole Thing Works - Danilo Paissan</title>
  <meta name="description" content="Trentino inside, ligurian outside">
  <style>
      :root {
        --color-pearl: #F8F9FA;
        --color-light-silver: #E9ECEF;
        --color-smoke-gray: #CED4DA;
        --color-medium-gray: #6C757D;
        --color-dark-gray: #212529;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: var(--color-dark-gray);
        background-color: var(--color-pearl);
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      
      header {
        background-color: var(--color-light-silver);
        border-bottom: 1px solid var(--color-smoke-gray);
        padding: 1rem 0;
      }
      
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .logo {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--color-dark-gray);
        text-decoration: none;
      }
      
      .nav-links {
        display: flex;
        list-style: none;
        gap: 2rem;
      }
      
      .nav-links a {
        color: var(--color-medium-gray);
        text-decoration: none;
        transition: color 0.3s ease;
      }
      
      .nav-links a:hover {
        color: var(--color-dark-gray);
      }
      
      main {
        min-height: calc(100vh - 200px);
        padding: 2rem 0;
      }
      
      .post-list {
        display: grid;
        gap: 2rem;
      }
      
      .post-card {
        background: white;
        border: 1px solid var(--color-smoke-gray);
        border-radius: 8px;
        padding: 1.5rem;
        transition: box-shadow 0.3s ease;
      }
      
      .post-card:hover {
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
      
      .post-title {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }
      
      .post-title a {
        color: var(--color-dark-gray);
        text-decoration: none;
      }
      
      .post-excerpt {
        color: var(--color-medium-gray);
        margin-bottom: 1rem;
      }
      
      .read-more {
        color: var(--color-medium-gray);
        text-decoration: none;
        font-weight: 500;
      }
      
      .post-content {
        background: white;
        border: 1px solid var(--color-smoke-gray);
        border-radius: 8px;
        padding: 2rem;
        margin-bottom: 2rem;
      }
      
      .post-content h1, .post-content h2, .post-content h3 {
        margin-bottom: 1rem;
        color: var(--color-dark-gray);
      }
      
      .post-content p {
        margin-bottom: 1rem;
      }
      
      .post-content p a {
        color: rgb(33, 37, 41);
        text-decoration: none;
      }
      
      .post-content code {
        background-color: var(--color-light-silver);
        border: 1px solid var(--color-smoke-gray);
        border-radius: 4px;
        padding: 0.2em 0.5em;
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Monaco, monospace;
        font-size: 0.9em;
        color: #c7254e;
      }

      .post-content pre code {
        display: block;
        background-color: var(--color-dark-gray);
        color: var(--color-pearl);
        border: none;
        border-radius: 8px;
        padding: 1rem 1.25rem;
        overflow-x: auto;
        font-size: 0.875em;
        line-height: 1.7;
      }

      .post-content pre {
        margin-bottom: 1rem;
      }
      
      .back-link {
        display: inline-block;
        color: var(--color-medium-gray);
        text-decoration: none;
        margin-bottom: 2rem;
      }
      
      footer {
        background-color: var(--color-light-silver);
        border-top: 1px solid var(--color-smoke-gray);
        padding: 2rem 0;
        text-align: center;
        color: var(--color-medium-gray);
      }
      
      .language-switcher {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }
      
      .language-switcher a {
        color: var(--color-medium-gray);
        text-decoration: none;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        transition: background-color 0.3s ease;
      }
      
      .language-switcher a:hover {
        background-color: var(--color-smoke-gray);
      }
      
      .language-switcher a.active {
        background-color: var(--color-smoke-gray);
        color: var(--color-dark-gray);
      }
      
      @media (max-width: 768px) {
        .nav-links {
          gap: 1rem;
        }
        
        .container {
          padding: 0 15px;
        }
        
        .post-content {
          padding: 1.5rem;
        }
      }
    </style>
</head>
<body>
  <header>
    <nav class="container">
      <a href="index-en.html" class="logo">
        Danilo Paissan
      </a>
      <div style="display: flex; align-items: center; gap: 2rem;">
        <ul class="nav-links">
          <li><a href="index-en.html">Home</a></li>
          <li><a href="about.html">About Me</a></li>
        </ul>
        <div class="language-switcher">
          <a href="javascript:switchLanguage('en')" class="active">EN</a>
          <span>|</span>
          <a href="javascript:switchLanguage('it')" class="">IT</a>
        </div>
      </div>
    </nav>
  </header>
  
  <main class="container">
    
      <a href="index-en.html" class="back-link">&larr; Back to home</a>
      <article class="post-content">
        <h1>How the Whole Thing Works</h1>
        <hr>
<p>There&#39;s something deeply satisfying about pressing &quot;push&quot; and knowing that, within a few minutes, your site will be updated. No FTP to open, no server to configure, no files to copy manually. Just you, your code, and a system that does all the dirty work for you.</p>
<p>That&#39;s exactly what I&#39;ve set up for this site: I write an article in Markdown, commit and push, and the site updates itself. It seems like magic, but it&#39;s just GitHub Actions doing its job. And the beautiful thing is that this &quot;magic&quot; is accessible to anyone, for free.</p>
<p>In this article, I&#39;ll tell you how I configured the automatic publishing system, with an interesting twist: the source code and the published site live in two separate repositories.</p>
<hr>
<h2>Why Separate Source and Publication</h2>
<p>When I started thinking about using GitHub Pages for hosting this site, I faced a choice: keep everything in the same repository or separate the source code from the published site.</p>
<p>The first option is the simplest: you have a single repository, and GitHub Pages publishes directly from there. It&#39;s the approach that works for most projects. But in my case, there were some considerations that pushed me toward the second path.</p>
<p><strong>Separation of concerns</strong>: the source repository contains TypeScript, build configurations, development files, tests. None of this is needed for the final site. Mixing the two makes the repository confusing and its purpose less clear.</p>
<p><strong>Selective privacy</strong>: maybe you want the source code to remain private, but the site needs to be public. With separate repositories, this distinction is natural.</p>
<p><strong>Cleaner git history</strong>: the publication repository contains only the generated HTML, CSS, and JavaScript files. Each commit represents a new version of the site, without the &quot;noise&quot; of development commits.</p>
<p><strong>Flexibility</strong>: you can have multiple source repositories publishing to the same site, or one source publishing to multiple different destinations.</p>
<hr>
<h2>Why GitHub Pages</h2>
<p>Before diving into automation, it&#39;s worth remembering why GitHub Pages is an ideal choice for static sites like blogs and portfolios.</p>
<p><strong>It&#39;s free</strong>. For public repositories, you pay nothing. Zero. No monthly fees, no consumption costs, no billing surprises.</p>
<p><strong>Automatic HTTPS</strong>. The SSL certificate is generated and renewed automatically. Your site will always be accessible via HTTPS without you having to do anything.</p>
<p><strong>Global CDN</strong>. Your files are distributed on servers around the world. A visitor from Japan and one from Italy will receive content from servers close to them, with optimal loading times.</p>
<p><strong>Reliability</strong>. GitHub&#39;s infrastructure is robust. Your site will be online practically always, without you having to worry about uptime, backups, or disaster recovery.</p>
<p><strong>Custom domains</strong>. You can connect your personal domain with a few clicks. GitHub also takes care of the HTTPS certificate for the custom domain.</p>
<p>Of course, there are limits: 1GB of space, 100GB of bandwidth per month, no dynamic content. But for a personal blog or portfolio, these limits are more than sufficient. And if one day you exceed them, well, congratulations: you have a problem that most bloggers would love to have.</p>
<hr>
<h2>GitHub Actions, What Is It?</h2>
<p>GitHub Actions is the automation system built into GitHub. You can think of it as a digital butler: you give it a list of instructions, and it faithfully executes them every time a certain event occurs.</p>
<p>In our case, the event is a push to the main branch. The instructions are: take the code, generate the site, publish it.</p>
<p>Actions are defined in YAML files in the <code>.github/workflows/</code> folder of the repository. Each file describes a &quot;workflow&quot;, a sequence of operations to execute.</p>
<p>The beautiful thing is that these workflows run on virtual machines provided by GitHub. You don&#39;t have to configure servers, you don&#39;t have to install software, you don&#39;t have to worry about anything. You define what you want to do, and GitHub takes care of how.</p>
<hr>
<h2>Anatomy of a Deploy Workflow</h2>
<p>Let&#39;s see how a workflow works that generates a static site and publishes it to an external repository. I won&#39;t show you the exact code (each project has its specifics), but I&#39;ll explain the logical flow.</p>
<h3>Trigger: When It Activates</h3>
<p>The workflow activates in two ways:</p>
<ol>
<li><strong>Automatically</strong> when you push to the main branch</li>
<li><strong>Manually</strong> from the Actions tab on GitHub (useful for forcing a deploy)</li>
</ol>
<p>The ability to trigger manually is underrated. Sometimes you want to rebuild the site without modifying anything, perhaps because you&#39;ve updated something in the destination repository. With one click, you can do it.</p>
<h3>Phase 1: Environment Preparation</h3>
<p>The first thing the workflow does is prepare the working environment:</p>
<ol>
<li><strong>Checkout</strong>: downloads the source code from the repository</li>
<li><strong>Setup Node.js</strong>: installs the correct version of Node.js</li>
<li><strong>Install dependencies</strong>: runs <code>npm ci</code> to install dependencies reproducibly</li>
</ol>
<p>This phase is identical for any Node.js project. The magic begins afterward.</p>
<h3>Phase 2: Site Generation</h3>
<p>Here the specific logic of SimplePress comes into play:</p>
<ol>
<li><strong>Cleanup</strong>: removes any previous builds</li>
<li><strong>Build</strong>: compiles TypeScript and generates HTML pages</li>
</ol>
<p>At the end of this phase, the <code>build/</code> folder contains the complete static site, ready to be published.</p>
<h3>Phase 3: Publishing to the External Repository</h3>
<p>This is the interesting part. The workflow needs to take the generated files and copy them to a completely different repository. How does it do that?</p>
<p>GitHub Actions provides predefined &quot;actions&quot;, small reusable modules that perform common operations. One of these, very popular, allows publishing files to GitHub Pages, even to external repositories.</p>
<p>The action:</p>
<ul>
<li>Connects to the destination repository using secure credentials</li>
<li>Creates a new commit with the generated files</li>
<li>Pushes this commit to the correct branch</li>
</ul>
<p>From the destination repository&#39;s perspective, it&#39;s as if someone made a commit with the new files. Simple, clean, traceable.</p>
<hr>
<h2>The Security Question</h2>
<p>To allow a workflow to write to another repository, credentials are needed. You can&#39;t just push to any repository (fortunately!).</p>
<p>There are two main approaches:</p>
<h3>Personal Access Token</h3>
<p>It&#39;s a token you generate from your GitHub account that gives access to your repositories. You store it as a &quot;secret&quot; in the source repository, and the workflow uses it to authenticate.</p>
<p><strong>Pros</strong>: simple to configure.
<strong>Cons</strong>: gives access to all your repositories (or all public ones), not just the destination one.</p>
<h3>Deploy Keys</h3>
<p>These are SSH keys specific to a single repository. You generate one, add the public part to the destination repository as a &quot;deploy key&quot;, and store the private part as a secret in the source repository.</p>
<p><strong>Pros</strong>: access limited to only the destination repository, more secure.
<strong>Cons</strong>: requires a few extra steps for configuration.</p>
<p>For a personal project, both approaches work. If you&#39;re particularly security-conscious, Deploy Keys are the better choice. I prefer this approach: the principle of least privilege is always a good practice.</p>
<hr>
<h2>The Complete Flow in Action</h2>
<p>Let&#39;s recap what happens when I push a new article:</p>
<ol>
<li><strong>Push</strong>: the commit arrives at the source repository</li>
<li><strong>Trigger</strong>: GitHub Actions detects the push and starts the workflow</li>
<li><strong>Checkout</strong>: the code is downloaded to the virtual machine</li>
<li><strong>Setup</strong>: Node.js is configured, dependencies installed</li>
<li><strong>Build</strong>: SimplePress generates the static site</li>
<li><strong>Deploy</strong>: the files are copied to the publication repository</li>
<li><strong>GitHub Pages</strong>: detects the new commit and updates the site</li>
</ol>
<p>All of this happens in a few minutes, without any manual intervention. I can write an article from my phone, commit from a web interface, and the site updates anyway.</p>
<hr>
<h2>Unexpected Benefits</h2>
<p>Beyond the obvious benefits (automation, convenience), this setup has some less obvious advantages:</p>
<p><strong>Easy rollback</strong>: every deploy is a commit in the publication repository. If something goes wrong, just revert to the last good commit and the site goes back to how it was.</p>
<p><strong>Audit trail</strong>: you can see exactly when each version of the site was published, and which source commit generated it.</p>
<p><strong>Simplified collaboration</strong>: if someday I wanted to accept contributions, collaborators could open pull requests on the source repository. The deploy would only happen after the merge, maintaining control over what gets published.</p>
<p><strong>Multiple environments</strong>: you could configure different workflows for different branches. For example, the <code>develop</code> branch could publish to a staging site, while <code>main</code> publishes to production.</p>
<hr>
<h2>Practical Considerations</h2>
<p>If you&#39;re thinking of implementing a similar system, here are some practical tips:</p>
<p><strong>Test locally before pushing</strong>. Make sure the build works on your computer before relying on automation. Debugging failed workflows is less fun than it sounds.</p>
<p><strong>Use <code>npm ci</code> instead of <code>npm install</code></strong>. The former is faster and guarantees reproducible builds, using exactly the versions specified in the lockfile.</p>
<p><strong>Enable dependency caching</strong>. GitHub Actions can cache npm dependencies between runs, significantly speeding up subsequent builds.</p>
<p><strong>Monitor workflows</strong>. Every now and then, take a look at the Actions tab. If something fails, you&#39;ll only know by looking there (unless you configure notifications, which is another good idea).</p>
<hr>
<h2>Conclusions</h2>
<p>Automating deployment is one of those investments that pays off every single day. The time spent configuring the workflow is quickly recovered, and above all, it eliminates that psychological friction that sometimes prevents us from publishing.</p>
<p>When you know that publishing simply means &quot;commit and push&quot;, you publish more. When you don&#39;t have to worry about deployment, you can focus on what really matters: the content.</p>
<p>GitHub Actions and GitHub Pages form a powerful combination for anyone managing a static site. They&#39;re free, reliable, and once configured, they fade into the background, doing their job silently.</p>
<p>The separation between source repository and publication repository adds a level of architectural cleanliness that I particularly appreciate. It&#39;s not necessary for everyone, but if you find yourself managing projects where the distinction between &quot;development&quot; and &quot;production&quot; is important, it&#39;s a pattern worth considering.</p>
<p>And the next time you push and your site updates by itself, take a moment to appreciate the magic. Even if you know exactly how it works, it still remains a bit magical.</p>
      </article>
    
  </main>
  
  <footer>
    <div class="container">
      <p>&copy; 2024 Danilo Paissan. All rights reserved.</p>
    </div>
  </footer>
  
  
      <div id="cookie-banner" class="cookie-banner" style="display: none;">
        <div class="cookie-content">
          <h3>Cookie Notice</h3>
          <p>This site does not use tracking or profiling cookies. Technical cookies are only used for site functionality.</p>
          <div class="cookie-buttons">
            <button onclick="acceptCookies()" class="btn-accept">Accept</button>
            <button onclick="rejectCookies()" class="btn-reject">Reject</button>
          </div>
        </div>
      </div>
      
      <style>
        .cookie-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: var(--color-dark-gray);
          color: white;
          z-index: 1000;
          padding: 1rem;
        }
        
        .cookie-content {
          max-width: 800px;
          margin: 0 auto;
        }
        
        .cookie-content h3 {
          margin-bottom: 0.5rem;
        }
        
        .cookie-content p {
          margin-bottom: 1rem;
        }
        
        .cookie-buttons {
          display: flex;
          gap: 1rem;
        }
        
        .cookie-buttons button {
          padding: 0.5rem 1rem;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: 500;
        }
        
        .btn-accept {
          background: var(--color-light-silver);
          color: var(--color-dark-gray);
        }
        
        .btn-reject {
          background: var(--color-medium-gray);
          color: white;
        }
        
        .cookie-rejected {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
          text-align: center;
        }
      </style>
      
      <script>
        function checkCookieConsent() {
          const consent = localStorage.getItem('cookieConsent');
          if (consent === 'rejected') {
            document.body.innerHTML = `
              <div class="cookie-rejected">
                <h2>You need to accept cookies to access the site.</h2>
                <button onclick="resetCookieConsent()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--color-medium-gray); color: white; border: none; border-radius: 4px; cursor: pointer;">
                  Accept
                </button>
              </div>
            `;
            return;
          }
          if (!consent) {
            document.getElementById('cookie-banner').style.display = 'block';
          }
        }
        
        function acceptCookies() {
          localStorage.setItem('cookieConsent', 'accepted');
          document.getElementById('cookie-banner').style.display = 'none';
        }
        
        function rejectCookies() {
          localStorage.setItem('cookieConsent', 'rejected');
          location.reload();
        }
        
        function resetCookieConsent() {
          localStorage.removeItem('cookieConsent');
          location.reload();
        }
        
        // Check consent on page load
        document.addEventListener('DOMContentLoaded', checkCookieConsent);
      </script>
    
  
  <script>
    function switchLanguage(lang) {
      const currentPath = window.location.pathname;
      const filename = currentPath.split('/').pop() || 'index.html';
      
      let newFilename;
      if (lang === 'en') {
        if (filename === 'index.html') {
          newFilename = 'index-en.html';
        } else if (filename === 'chi-sono.html') {
          newFilename = 'about.html';
        } else if (!filename.includes('-en.html')) {
          newFilename = filename.replace('.html', '-en.html');
        } else {
          newFilename = filename;
        }
      } else {
        if (filename === 'index-en.html') {
          newFilename = 'index.html';
        } else if (filename === 'about.html') {
          newFilename = 'chi-sono.html';
        } else if (filename.includes('-en.html')) {
          newFilename = filename.replace('-en.html', '.html');
        } else {
          newFilename = filename;
        }
      }
      
      window.location.href = newFilename;
    }
  </script>
</body>
</html>